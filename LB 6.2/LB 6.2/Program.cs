using System;
using System.Collections.Generic;

namespace PublicationHierarchy
{
    // Базовый класс Видання
    public class Видання
    {
        public string Назва { get; set; }
        public string Автор { get; set; }
        public int РікВидання { get; set; }

        public Видання(string назва, string автор, int рікВидання)
        {
            Назва = назва;
            Автор = автор;
            РікВидання = рікВидання;
        }

        public override string ToString()
        {
            return $"Назва: {Назва}, Автор: {Автор}, Рік видання: {РікВидання}";
        }
    }

    // Производний клас Книга
    public class Книга : Видання
    {
        public string Жанр { get; set; }
        public int КількістьСторінок { get; set; }

        public Книга(string назва, string автор, int рікВидання, string жанр, int кількістьСторінок)
            : base(назва, автор, рікВидання)
        {
            Жанр = жанр;
            КількістьСторінок = кількістьСторінок;
        }

        public override string ToString()
        {
            return $"{base.ToString()}, Жанр: {Жанр}, Кількість сторінок: {КількістьСторінок}";
        }
    }

    // Производний клас Журнал
    public class Журнал : Видання
    {
        public string ЧастотаВидання { get; set; }

        public Журнал(string назва, string автор, int рікВидання, string частотаВидання)
            : base(назва, автор, рікВидання)
        {
            ЧастотаВидання = частотаВидання;
        }

        public override string ToString()
        {
            return $"{base.ToString()}, Частота видання: {ЧастотаВидання}";
        }
    }

    // Производний клас ДрукованеВидання
    public class ДрукованеВидання : Видання
    {
        public string ТипДрукованогоВидання { get; set; }

        public ДрукованеВидання(string назва, string автор, int рікВидання, string типДрукованогоВидання)
            : base(назва, автор, рікВидання)
        {
            ТипДрукованогоВидання = типДрукованогоВидання;
        }

        public override string ToString()
        {
            return $"{base.ToString()}, Тип друкованого видання: {ТипДрукованогоВидання}";
        }
    }

    // Производний клас Підручник
    public class Підручник : Видання
    {
        public string Предмет { get; set; }
        public string РівеньНавчання { get; set; }

        public Підручник(string назва, string автор, int рікВидання, string предмет, string рівеньНавчання)
            : base(назва, автор, рікВидання)
        {
            Предмет = предмет;
            РівеньНавчання = рівеньНавчання;
        }

        public override string ToString()
        {
            return $"{base.ToString()}, Предмет: {Предмет}, Рівень навчання: {РівеньНавчання}";
        }
    }

    // Клас Бібліотека для зберігання видань
    public class Бібліотека
    {
        private List<Видання> видання = new List<Видання>();

        public void ДодатиВидання(Видання видання)
        {
            this.видання.Add(видання);
        }

        public List<Книга> ОтриматиКнигиНеРаніше(int рік)
        {
            return видання.OfType<Книга>()
                          .Where(k => k.РікВидання >= рік)
                          .ToList();
        }

        public void ВивестиВсіВидання()
        {
            foreach (var видання in this.видання)
            {
                Console.WriteLine(видання);
            }
        }
    }

    // Точка входу
    class Program
    {
        static void Main(string[] args)
        {
            // Створення бібліотеки
            Бібліотека бібліотека = new Бібліотека();

            // Додавання видань
            бібліотека.ДодатиВидання(new Книга(
                "Гаррі Поттер і Філософський камінь",
                "Джоан Роулінг",
                1997,
                "Фентезі",
                309
            ));

            бібліотека.ДодатиВидання(new Книга(
                "1984",
                "Джордж Орвелл",
                1949,
                "Драма",
                328
            ));

            бібліотека.ДодатиВидання(new Журнал(
                "Наукова Жизнь",
                "Наукова редакція",
                2023,
                "Місячно"
            ));

            бібліотека.ДодатиВидання(new Підручник(
                "Алгебра для 5 класу",
                "О. С. Іванова",
                2022,
                "Математика",
                "Шкільний"
            ));

            бібліотека.ДодатиВидання(new ДрукованеВидання(
                "Сучасне мистецтво",
                "Експертна комісія",
                2021,
                "Каталог"
            ));

            // Виведення всіх видань
            Console.WriteLine("Всі видання у бібліотеці:");
            бібліотека.ВивестиВсіВидання();

            // Пошук книг, які з'явилися не раніше 2020 року
            Console.WriteLine("\nКниги, які з'явилися не раніше 2020 року:");
            var книгиНеРаніше2020 = бібліотека.ОтриматиКнигиНеРаніше(2020);

            if (книгиНеРаніше2020.Count == 0)
            {
                Console.WriteLine("Немає книг, що задовольняють умову.");
            }
            else
            {
                foreach (var книга in книгиНеРаніше2020)
                {
                    Console.WriteLine($"-{книга.Назва}");
                }
            }
        }
    }
}