using System;

namespace TrainClasses
{
    // Базовый класс Поезд
    public class Поезд
    {
        public string СтанцияНазначения { get; set; }
        public DateTime ВремяОтправления { get; set; }
        public DateTime ВремяПрибытия { get; set; }
        public int КоличествоОстановок { get; set; }

        public Поезд(string станцияНазначения, DateTime времяОтправления, DateTime времяПрибытия, int количествоОстановок)
        {
            СтанцияНазначения = станцияНазначения;
            ВремяОтправления = времяОтправления;
            ВремяПрибытия = времяПрибытия;
            КоличествоОстановок = количествоОстановок;
        }

        public virtual double РасчетСреднегоИнтервала()
        {
            if (КоличествоОстановок <= 0)
                throw new ArgumentException("Количество остановок должно быть больше нуля.");

            TimeSpan общееВремя = ВремяПрибытия - ВремяОтправления;
            double среднийИнтервал = (double)общееВремя.TotalMinutes / КоличествоОстановок;

            return среднийИнтервал;
        }
    }

    // Производный класс Экспресс
    public class Экспресс : Поезд
    {
        public string Название { get; set; }
        public double МаксимальнаяСкорость { get; set; }

        public Экспресс(string станцияНазначения, DateTime времяОтправления, DateTime времяПрибытия, int количествоОстановок, string название, double максимальнаяСкорость)
            : base(станцияНазначения, времяОтправления, времяПрибытия, количествоОстановок)
        {
            Название = название;
            МаксимальнаяСкорость = максимальнаяСкорость;
        }

        public override double РасчетСреднегоИнтервала()
        {
            double среднийИнтервал = base.РасчетСреднегоИнтервала();
            Console.WriteLine($"Для экспресса '{Название}' средний интервал между остановками: {среднийИнтервал:F2} минут.");
            return среднийИнтервал;
        }
    }

    // Точка входа
    class Program
    {
        static void Main(string[] args)
        {
            // Обычный поезд
            Поезд обычныйПоезд = new Поезд(
                "Киев",
                new DateTime(2025, 4, 5, 8, 0, 0),
                new DateTime(2025, 4, 5, 14, 0, 0),
                5
            );

            Console.WriteLine("Обычный поезд:");
            Console.WriteLine($"Станция назначения: {обычныйПоезд.СтанцияНазначения}");
            Console.WriteLine($"Время отправления: {обычныйПоезд.ВремяОтправления}");
            Console.WriteLine($"Время прибытия: {обычныйПоезд.ВремяПрибытия}");
            Console.WriteLine($"Количество остановок: {обычныйПоезд.КоличествоОстановок}");
            Console.WriteLine($"Средний интервал между остановками: {обычныйПоезд.РасчетСреднегоИнтервала():F2} минут");

            // Экспресс
            Экспресс экспресс = new Экспресс(
                "Харьков",
                new DateTime(2025, 4, 5, 9, 0, 0),
                new DateTime(2025, 4, 5, 16, 0, 0),
                3,
                "Сапсан",
                250.0
            );

            Console.WriteLine("\nЭкспресс:");
            Console.WriteLine($"Название: {экспресс.Название}");
            Console.WriteLine($"Станция назначения: {экспресс.СтанцияНазначения}");
            Console.WriteLine($"Время отправления: {экспресс.ВремяОтправления}");
            Console.WriteLine($"Время прибытия: {экспресс.ВремяПрибытия}");
            Console.WriteLine($"Количество остановок: {экспресс.КоличествоОстановок}");
            Console.WriteLine($"Максимальная скорость: {экспресс.МаксимальнаяСкорость} км/ч");
            Console.WriteLine($"Средний интервал между остановками: {экспресс.РасчетСреднегоИнтервала():F2} минут");
        }
    }
}